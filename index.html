<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>공정선거 제보센터</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      background: #f4f4f4;
      color: #333;
    }
    header {
      background-color: #002147;
      color: white;
      padding: 40px 20px 20px;
      text-align: center;
    }
    header h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }
    header p {
      font-size: 14px;
      color: #ddd;
    }
    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    h3 {
      text-align: center;
      font-size: 18px;
      margin-bottom: 20px;
    }
    .upload-section {
      margin-bottom: 40px;
    }
    .upload-controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .upload-controls input[type="file"] {
      padding: 10px;
      font-size: 14px;
      width: 100%;
      max-width: 400px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .upload-controls button {
      padding: 10px 20px;
      background: #16a085;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }
    .nav-buttons {
      text-align: center;
      margin-top: 15px;
    }
    .nav-buttons button {
      padding: 8px 16px;
      font-size: 13px;
      margin: 0 10px;
      border-radius: 6px;
    }
    #videoSliderContainer {
      overflow: hidden;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #fff;
      margin-top: 20px;
    }
    #videoSlider {
      display: flex;
      transition: transform 0.4s ease-in-out;
    }
    .video-slide {
      min-width: 100%;
      padding: 10px;
    }
    .video-slide video {
      width: 100%;
      border-radius: 10px;
    }
    .comments {
      margin-top: 15px;
      border-top: 1px solid #ddd;
      padding-top: 10px;
    }
    .comment {
      margin-bottom: 6px;
      font-size: 14px;
    }
    .comment-form {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .comment-form textarea {
      padding: 8px;
      font-size: 13px;
      width: 100%;
      max-width: 600px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .comment-form button {
      align-self: flex-start;
      padding: 6px 12px;
      background: #002147;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }
    .solana-btn {
      background-color: #7b2cbf;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    .share-buttons {
      margin-top: 10px;
    }
    .share-buttons button,
    .share-buttons a {
      margin-right: 10px;
      text-decoration: none;
      font-size: 14px;
    }
  </style>
</head>
<body>
<header>
  <h1>공정선거를 위한 제보센터</h1>
  <p>부정선거 의심영상 제보 및 시민 참여 플랫폼</p>
</header>
<main>
  <div style="text-align: center; margin-bottom: 30px;">
    📧 문의하기: <strong>realvotewin@gmail.com</strong><br><br>
    <button class="solana-btn" onclick="copySolana()">SOL 후원하기</button>
  </div>
  <input type="text" id="solAddress" value="DWn4EHJUSwRpSF3h8pE37tWjpyCBexWe785VSoXrzsxJ" style="position:absolute; left:-9999px;">
  <section class="upload-section">
    <h3>📥 부정선거 의심 관련 동영상 제보</h3>
    <div class="upload-controls">
      <input type="file" id="videoInput" accept="video/*">
      <button onclick="uploadVideo()">업로드</button>
    </div>
    <div class="nav-buttons">
      <button onclick="prevSlide()">⬅ 이전</button>
      <button onclick="nextSlide()">다음 ➡</button>
    </div>
  </section>
  <div id="videoSliderContainer">
    <div id="videoSlider"></div>
  </div>
</main>

<script>
  let currentSlide = 0;

  function getAnonName() {
    const saved = localStorage.getItem("anonName");
    if (saved) return saved;
    const randomId = Math.floor(Math.random() * 99999999) + 100000;
    const name = `익명 ${randomId}`;
    localStorage.setItem("anonName", name);
    return name;
  }

  const anonName = getAnonName();

  function uploadVideo() {
    const input = document.getElementById("videoInput");
    const file = input.files[0];

    if (file && file.type.startsWith("video/")) {
      const url = URL.createObjectURL(file);
      const slider = document.getElementById("videoSlider");
      const index = slider.children.length;

      const slide = document.createElement("div");
      slide.classList.add("video-slide");

      slide.innerHTML = `
        <video controls src="${url}"></video>
        <div class="share-buttons">
          <button onclick="copyVideoLink('${url}')">📎 링크 복사</button>
          <a href="https://www.instagram.com/" target="_blank">📷 인스타그램</a>
          <a href="https://www.youtube.com/" target="_blank">📺 유튜브</a>
        </div>
        <div class="comments" id="comments-${index}">
          <div class="comment-form">
            <textarea placeholder="댓글을 입력하세요"></textarea>
            <button onclick="addComment(${index})">댓글 등록</button>
          </div>
          <div class="comment-list"></div>
        </div>
      `;

      slider.appendChild(slide);
      moveToSlide(index);
      input.value = "";
    }
  }

  function moveToSlide(index) {
    const slider = document.getElementById("videoSlider");
    const width = slider.parentElement.clientWidth;
    slider.style.transform = `translateX(-${index * width}px)`;
    currentSlide = index;
  }

  function prevSlide() {
    if (currentSlide > 0) moveToSlide(currentSlide - 1);
  }

  function nextSlide() {
    const total = document.getElementById("videoSlider").children.length;
    if (currentSlide < total - 1) moveToSlide(currentSlide + 1);
  }

  function addComment(index) {
    const commentsSection = document.getElementById(`comments-${index}`);
    const textarea = commentsSection.querySelector("textarea");
    const text = textarea.value.trim();
    if (text === "") return;

    const commentList = commentsSection.querySelector(".comment-list");
    const newComment = document.createElement("div");
    newComment.classList.add("comment");
    newComment.innerText = `💬 ${anonName}: ${text}`;
    commentList.appendChild(newComment);
    textarea.value = "";
  }

  function copySolana() {
    const input = document.getElementById("solAddress");
    input.select();
    input.setSelectionRange(0, 99999);
    document.execCommand("copy");
    alert("💰 SOL 주소가 복사되었습니다!");
  }

  function copyVideoLink(url) {
    navigator.clipboard.writeText(url).then(() => {
      alert("📎 영상 링크가 복사되었습니다!");
    });
  }
</script>

</body>
</html>

